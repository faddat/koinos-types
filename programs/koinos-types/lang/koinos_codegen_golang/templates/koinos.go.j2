{%- macro typeref(tref) -%}
{%- if tref["targs"] is none -%}
{{tref["name"][2]}}
{%- endif -%}
{%- endmacro -%}


{%- for name, decl in decls_by_name.items() -%}
{% if decl["info"]["type"] == "Struct" %}
// {{decl}}
type {{decl["name"]}} struct {
{% if decl["fields"]|length > 0 -%}
{%- for field in decl["fields"] %}{{field["name"]}} {{typeref(field["tref"])}}
{% endfor %}
{%- endif -%}
}
{% endif -%}
{% endfor %}
